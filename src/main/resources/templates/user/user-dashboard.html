<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Dashboard - DevCollab</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      .sidebar {
        height: calc(100vh - 4rem);
        top: 4rem;
        transition: all 0.3s ease;
      }

      .project-card-item {
        border: 1px solid #e5e7eb;
        transition: transform 0.2s, box-shadow 0.2s;
        cursor: pointer;
      }
      .project-card-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }

      .bg-color-teal {
        background-color: #008080;
      }
      .bg-color-blue {
        background-color: #4169e1;
      }
      .bg-color-orange {
        background-color: #ff8c00;
      }
      .bg-color-red {
        background-color: #dc143c;
      }

      .sidebar-item-active {
        background-color: #eff6ff;
        color: #2563eb;
        font-weight: 600;
        border-right: 4px solid #2563eb;
      }
      .sidebar-item {
        color: #4b5563;
        transition: background-color 0.15s;
        border-right: 4px solid transparent;
      }
      .sidebar-item:hover {
        background-color: #f9fafb;
        color: #1f2937;
      }
    </style>
  </head>

  <body class="bg-gray-50 font-sans">
    <!-- ✅ HEADER -->
    <div th:replace="~{fragments/header :: header}"></div>

    <div class="flex min-h-[calc(100vh-4rem)]">
      <!-- ✅ SIDEBAR -->
      <div th:replace="~{fragments/sidebar :: sidebar}"></div>

      <!-- ✅ MAIN CONTENT -->
      <main class="flex-1 p-8 overflow-y-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">Dashboard</h1>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <div
            class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200"
          >
            <div class="flex justify-between items-center mb-4 border-b pb-3">
              <h2 class="text-xl font-bold text-gray-800">Projects</h2>
              <div class="text-sm text-gray-500">52 files</div>
            </div>

            <div class="flex space-x-4 overflow-x-auto pb-4">
              <div
                class="project-card-item w-72 flex-shrink-0 bg-gray-50 p-4 rounded-xl"
              >
                <h3 class="font-bold mb-3 text-blue-700">Mobile UI Design</h3>
                <div class="space-y-3">
                  <img
                    src="https://placehold.co/100x180/ADD8E6/000000?text=Mobile+App"
                    class="w-full h-44 rounded-lg object-cover shadow-md"
                    alt="Mobile App UI"
                  />
                  <p class="text-xs text-gray-500 line-clamp-2">
                    Creating high-fidelity mockups for a new social networking
                    mobile application...
                  </p>
                  <div
                    class="flex items-center justify-between pt-2 border-t border-gray-200"
                  >
                    <span
                      class="text-xs font-semibold text-green-600 bg-green-100 px-2 py-0.5 rounded-full"
                      >Completed</span
                    >
                    <div class="flex items-center text-xs text-gray-600">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4 mr-1 text-red-500"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.414L11 9.586V6z"
                          clip-rule="evenodd"
                        />
                      </svg>
                      Due: 12/03
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="project-card-item w-72 flex-shrink-0 bg-gray-50 p-4 rounded-xl"
              >
                <h3 class="font-bold mb-3 text-blue-700">Papeer Sumeiran</h3>
                <div class="space-y-3">
                  <img
                    src="https://placehold.co/100x180/FF6347/FFFFFF?text=Product+Launch"
                    class="w-full h-44 rounded-lg object-cover shadow-md"
                    alt="Product Launch"
                  />
                  <p class="text-xs text-gray-500 line-clamp-2">
                    Finalizing documentation and marketing assets for the Q3
                    product release...
                  </p>
                  <div
                    class="flex items-center justify-between pt-2 border-t border-gray-200"
                  >
                    <span
                      class="text-xs font-semibold text-yellow-600 bg-yellow-100 px-2 py-0.5 rounded-full"
                      >On Hold</span
                    >
                    <div class="flex items-center text-xs text-gray-600">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4 mr-1 text-red-500"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.414L11 9.586V6z"
                          clip-rule="evenodd"
                        />
                      </svg>
                      Due: 28/03
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="project-card-item w-72 flex-shrink-0 bg-gray-50 p-4 rounded-xl"
              >
                <h3 class="font-bold mb-3 text-blue-700">E-commerce Backend</h3>
                <div class="space-y-3">
                  <img
                    src="https://placehold.co/100x180/B0E0E6/000000?text=Backend+Code"
                    class="w-full h-44 rounded-lg object-cover shadow-md"
                    alt="Backend Code"
                  />
                  <p class="text-xs text-gray-500 line-clamp-2">
                    Developing and testing new API endpoints for product and
                    order management...
                  </p>
                  <div
                    class="flex items-center justify-between pt-2 border-t border-gray-200"
                  >
                    <span
                      class="text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full"
                      >In Progress</span
                    >
                    <div class="flex items-center text-xs text-gray-600">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4 mr-1 text-red-500"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.414L11 9.586V6z"
                          clip-rule="evenodd"
                        />
                      </svg>
                      Due: 05/04
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200"
          >
            <div class="flex justify-between items-center mb-4 border-b pb-3">
              <h2 class="text-xl font-bold text-gray-800">Tasks</h2>
              <select
                class="text-sm font-semibold text-gray-700 bg-gray-100 rounded-lg p-1.5 focus:outline-none focus:ring-1 focus:ring-blue-500"
              >
                <option>This Week</option>
                <option>This Month</option>
              </select>
            </div>

            <div
              class="flex flex-col lg:flex-row items-center justify-around space-y-4 lg:space-y-0 lg:space-x-4"
            >
              <div class="relative w-40 h-40 flex items-center justify-center">
                <div
                  class="w-full h-full rounded-full"
                  style="
                    background: conic-gradient(
                      #008080 0% 32%,
                      /* Completed (Teal) */ #4169e1 32% 57%,
                      /* On Hold (Blue) */ #dc143c 57% 75%,
                      /* Pending (Red) */ #ff8c00 75% 100%
                        /* In Progress (Orange) */
                    );
                  "
                ></div>
                <div
                  class="absolute w-24 h-24 bg-white rounded-full shadow-inner"
                ></div>
              </div>

              <div class="space-y-3 w-full max-w-xs p-4">
                <div class="flex items-center space-x-2">
                  <span class="block w-3 h-3 rounded-full bg-color-teal"></span>
                  <span class="text-sm text-gray-700">Completed (32%)</span>
                </div>
                <div class="flex items-center space-x-2">
                  <span class="block w-3 h-3 rounded-full bg-color-blue"></span>
                  <span class="text-sm text-gray-700">On Hold (25%)</span>
                </div>
                <div class="flex items-center space-x-2">
                  <span
                    class="block w-3 h-3 rounded-full bg-color-orange"
                  ></span>
                  <span class="text-sm text-gray-700">In Progress (25%)</span>
                </div>
                <div class="flex items-center space-x-2">
                  <span class="block w-3 h-3 rounded-full bg-color-red"></span>
                  <span class="text-sm text-gray-700">Pending (18%)</span>
                </div>
              </div>
            </div>
          </div>

          <div
            class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200"
          >
            <div class="flex justify-between items-center mb-4 border-b pb-3">
              <h2 class="text-xl font-bold text-gray-800">Work Log</h2>
              <select
                class="text-sm font-semibold text-gray-700 bg-gray-100 rounded-lg p-1.5 focus:outline-none focus:ring-1 focus:ring-blue-500"
              >
                <option>This Week</option>
                <option>This Month</option>
              </select>
            </div>

            <div
              class="flex flex-col lg:flex-row items-center justify-around space-y-4 lg:space-y-0 lg:space-x-4"
            >
              <div class="relative w-40 h-40 flex items-center justify-center">
                <div
                  class="w-full h-full rounded-full"
                  style="
                    background: conic-gradient(
                      #dc143c 0% 15%,
                          /* Product 1 (Đỏ) */ #ff8c00 15% 35%,
                          /* Product 2 (Cam) */ #008080 35% 55%,
                          /* Product 3 (Teal) */ #4169e1 55% 80%,
                          /* Product 4 (Xanh dương) */ #b0c4de 80% 100%    
                        /* Product 5 (Xanh nhạt) */
                    );
                  "
                ></div>
                <div
                  class="absolute w-24 h-24 bg-white rounded-full shadow-inner"
                ></div>
              </div>

              <div class="space-y-3 w-full max-w-xs p-4 text-sm">
                <div class="flex items-center space-x-2">
                  <span class="block w-3 h-3 rounded-full bg-color-red"></span
                  ><span class="text-gray-700">Product 1 (15%)</span>
                </div>
                <div class="flex items-center space-x-2">
                  <span
                    class="block w-3 h-3 rounded-full bg-color-orange"
                  ></span
                  ><span class="text-gray-700">Product 2 (20%)</span>
                </div>
                <div class="flex items-center space-x-2">
                  <span class="block w-3 h-3 rounded-full bg-color-teal"></span
                  ><span class="text-gray-700">Product 3 (20%)</span>
                </div>
                <div class="flex items-center space-x-2">
                  <span class="block w-3 h-3 rounded-full bg-color-blue"></span
                  ><span class="text-gray-700">Product 4 (25%)</span>
                </div>
                <div class="flex items-center space-x-2">
                  <span class="block w-3 h-3 rounded-full bg-gray-400"></span
                  ><span class="text-gray-700">Product 5 (20%)</span>
                </div>
              </div>
            </div>
          </div>

          <div
            class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200"
          >
            <div class="flex justify-between items-center mb-4 border-b pb-3">
              <h2 class="text-xl font-bold text-gray-800">Performance</h2>
              <select
                class="text-sm font-semibold text-gray-700 bg-gray-100 rounded-lg p-1.5 focus:outline-none focus:ring-1 focus:ring-blue-500"
              >
                <option>This Week</option>
                <option>This Month</option>
              </select>
            </div>

            <div class="h-64 flex flex-col justify-end">
              <div class="relative h-full">
                <div
                  class="absolute inset-y-0 left-0 border-r border-gray-200 w-full"
                  style="z-index: 0"
                ></div>

                <svg
                  class="absolute w-full h-full"
                  viewBox="0 0 100 100"
                  preserveAspectRatio="none"
                >
                  <polyline
                    fill="none"
                    stroke="#ff8c00"
                    stroke-width="2"
                    points="0,80 15,30 30,50 45,20 60,60 75,10 90,40"
                  />

                  <polyline
                    fill="none"
                    stroke="#4169e1"
                    stroke-width="2"
                    points="0,90 15,40 30,60 45,30 60,70 75,20 90,50"
                  />
                </svg>
              </div>

              <div
                class="flex justify-between text-xs text-gray-500 mt-2 border-t border-gray-200 pt-1"
              >
                <span>Oct 2023</span>
                <span>Dec 2023</span>
                <span>Feb 2024</span>
                <span>Apr 2024</span>
              </div>
            </div>

            <div class="flex justify-center space-x-4 mt-6">
              <div class="flex items-center space-x-2">
                <span class="block w-3 h-3 rounded-full bg-color-orange"></span>
                <span class="text-sm text-gray-700">7 Projects</span>
              </div>
              <div class="flex items-center space-x-2">
                <span class="block w-3 h-3 rounded-full bg-color-blue"></span>
                <span class="text-sm text-gray-700">5 Projects</span>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
    <!-- ✅ CHATBOX FRAGMENT -->
    <div th:replace="fragments/chatbox :: chatbox"></div>
    <!-- Gọi script riêng -->
    <script th:src="@{/js/chatbox.js}"></script>
  </body>
</html>
