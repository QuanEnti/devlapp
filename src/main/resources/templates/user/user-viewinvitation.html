<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User View Invitations - DevCollab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Sidebar full height - KẾ THỪA TỪ FILE GỐC */
      .sidebar {
        height: calc(100vh - 4rem);
        top: 4rem;
        transition: all 0.3s ease;
      }

      /* Avatar style */
      .avatar {
        width: 28px;
        height: 28px;
        object-fit: cover;
        border: 2px solid white;
        box-shadow: 0 0 0 1px #e5e7eb;
      }

      /* Sidebar active styles */
      .sidebar-item-active {
        background-color: #eff6ff;
        color: #2563eb;
        font-weight: 600;
        border-right: 4px solid #2563eb;
      }
      .sidebar-item {
        color: #4b5563;
        transition: background-color 0.15s;
        border-right: 4px solid transparent;
      }
      .sidebar-item:hover {
        background-color: #f9fafb;
        color: #1f2937;
      }

      /* Nút '+' trong danh sách thành viên */
      .member-plus {
        background-color: #f3f4f6;
        border-radius: 9999px;
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: 600;
        margin-left: -0.5rem;
        border: 2px solid white;
        box-shadow: 0 0 0 1px #e5e7eb;
      }
    </style>
  </head>
  <body class="bg-gray-50 font-sans">
    
    <!-- Import Taskbar -->
    <div th:replace="fragments/header :: header"></div>

    <div class="flex min-h-[calc(100vh-4rem)]">
      <!-- Import Sidebar -->
      <div th:replace="fragments/sidebar :: sidebar"></div>

      <main class="flex-1 p-8 overflow-y-auto bg-gray-50">
        <div class="flex justify-between items-center mb-6">
          <h1 class="text-3xl font-bold text-gray-800">
            Project Invitations & Status
          </h1>
          <div class="flex items-center space-x-4 text-gray-600">
            <div
              class="flex items-center border border-gray-300 rounded-lg py-1 px-3 bg-white cursor-pointer hover:bg-gray-100 transition"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 mr-1"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  d="M3 3a1 1 0 000 2h11a1 1 0 100-2H3zM3 7a1 1 0 000 2h7a1 1 0 100-2H3zM3 11a1 1 0 100 2h4a1 1 0 100-2H3zM15 15a1 1 0 000-2h2a1 1 0 100 2h-2z"
                />
              </svg>
              <span class="text-sm">Sort</span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4 ml-1"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="relative">
              <input
                type="text"
                placeholder="Search projects..."
                class="border border-gray-300 rounded-lg pl-3 pr-8 py-1.5 w-48 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              />
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4 absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                />
              </svg>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          <script>
            function createProjectCard(status) {
              let statusClass = "";
              let showActions = false;
              let showViewButton = false;

              if (status === "Invited") {
                statusClass = "bg-blue-100 text-blue-700";
                showActions = true;
              } else if (status === "Accepted") {
                statusClass = "bg-green-100 text-green-700";
                showViewButton = true;
              } else if (status === "Declined") {
                statusClass = "bg-red-100 text-red-700";
              }

              const members = [1, 2, 3]
                .map(
                  (i) =>
                    `<img src="https://i.pravatar.cc/28?img=${
                      Math.floor(Math.random() * 70) + i
                    }" class="rounded-full border-2 border-white w-7 h-7 -ml-2 first:ml-0 shadow-sm" alt="Member Avatar">`
                )
                .join("");

              let actions = "";
              let justifyClass = "";

              if (showActions) {
                actions = `<div class="flex gap-2">
                  <button class="bg-green-600 text-white px-4 py-1.5 rounded-lg text-sm font-semibold shadow-md hover:bg-green-700 transition">Accept</button>
                  <button class="bg-red-600 text-white px-4 py-1.5 rounded-lg text-sm font-semibold shadow-md hover:bg-red-700 transition">Decline</button>
                </div>`;
                justifyClass = "justify-start";
              } else if (showViewButton) {
                actions = `<button class="bg-gray-100 text-gray-700 px-4 py-1.5 rounded-lg text-sm font-semibold border border-gray-300 shadow-sm hover:bg-gray-200 transition">View Project</button>`;
                justifyClass = "justify-end";
              } else {
                actions = '<div class="h-[36px]"></div>';
                justifyClass = "justify-start";
              }

              return `
                <div class="bg-white p-5 rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition transform hover:-translate-y-0.5">
                  <div class="flex justify-between items-start mb-2">
                    <h2 class="text-lg font-bold text-gray-800">Adoddle</h2>
                    <span class="${statusClass} text-xs font-semibold px-3 py-1 rounded-full flex-shrink-0">${status}</span>
                  </div>
                  <p class="text-gray-600 text-sm mb-4 leading-snug line-clamp-3" style="min-height: 4.5rem;">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                  </p>
                  <p class="text-gray-600 text-sm font-semibold mb-3 border-t pt-3 border-gray-100">Deadline: 05 APRIL 2023</p>

                  <div class="flex justify-between items-center pt-3 border-t border-gray-100">
                    <div class="flex items-center">
                      ${members}
                      <span class="member-plus text-xs font-semibold text-gray-500 -ml-2">+2</span>
                    </div>
                    <p class="text-gray-500 text-sm">14 issues</p>
                  </div>

                  <div class="mt-4 flex ${justifyClass}">
                    ${actions}
                  </div>
                </div>
              `;
            }

            document.write(createProjectCard("Invited"));
            document.write(createProjectCard("Accepted"));
            document.write(createProjectCard("Declined"));
            document.write(createProjectCard("Invited"));
            document.write(createProjectCard("Accepted"));
            document.write(createProjectCard("Declined"));
          </script>
        </div>

        <div class="flex justify-center mt-8 space-x-2">
          <button class="px-4 py-2 text-sm font-semibold border border-gray-300 rounded-lg text-gray-500 bg-white hover:bg-gray-100 transition">Previous</button>
          <button class="px-4 py-2 text-sm font-semibold border border-blue-600 rounded-lg bg-blue-600 text-white shadow-md">1</button>
          <button class="px-4 py-2 text-sm font-semibold border border-gray-300 rounded-lg bg-white text-gray-700 hover:bg-gray-100 transition">2</button>
          <button class="px-4 py-2 text-sm font-semibold border border-gray-300 rounded-lg bg-white text-gray-700 hover:bg-gray-100 transition">3</button>
          <button class="px-4 py-2 text-sm font-semibold border border-gray-300 rounded-lg text-gray-500 bg-white hover:bg-gray-100 transition">Next</button>
        </div>
      </main>
    </div>
  </body>
</html>
